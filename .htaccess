# PHP 설정
php_flag display_errors on
php_value error_reporting E_ALL

# CORS 설정
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type, Authorization, Accept"
Header set Access-Control-Allow-Credentials "true"

# 기본 문서 설정
DirectoryIndex index.php index.html

# React 라우팅 설정
RewriteEngine On
RewriteBase /

# API 요청 처리
RewriteRule ^api/(.*)$ api/index.php [QSA,L]

# React 라우팅 처리
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/api/
RewriteRule ^(.*)$ index.html [QSA,L]

# 에러 문서 설정
ErrorDocument 500 /error.php
ErrorDocument 404 /error.php

# PHP 설정
php_value upload_max_filesize 10M
php_value post_max_size 10M
php_value max_execution_time 300
php_value max_input_time 300

# 보안 설정
ServerSignature Off

Options +FollowSymLinks
AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps

# OPTIONS 요청 처리
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L]

# 디렉토리 인덱싱 비활성화
Options -Indexes

# 기본 인덱스 파일 설정
DirectoryIndex index.html index.php 